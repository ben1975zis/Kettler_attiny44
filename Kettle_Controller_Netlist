# УМНЫЙ ЧАЙНИК НА ATTINY44A - СПИСОК СОЕДИНЕНИЙ (ПЛАТА УПРАВЛЕНИЯ 5V)

## НАЗНАЧЕНИЕ КОМПОНЕНТОВ

### МИКРОСХЕМЫ
- **IC1** — ATtiny44A (SOP-14)

### ТРАНЗИСТОРЫ
- **Q1** — 2N7002 (N-MOSFET, SOT-23) - сигнал к реле
- **Q2** — MMBT2222A/SS8050 (NPN, SOT-23) - для буззера

### ДИОДЫ
- **D1** — 1N4007 (защита реле)

### СВЕТОДИОДЫ
- **LED1-5** — LED 1205 (режимы 1-5)
- **LED_RGB** — RGB LED общий анод (4-pin)

### КОНДЕНСАТОРЫ
- **C1** — 100nF (развязка VCC)
- **C2** — 100nF (развязка AVCC)
- **C3** — 100nF (фильтр NTC)

### РЕЗИСТОРЫ
- **R1** — 47кОм 0.25W (делитель NTC)
- **R2** — 220 Ом (RGB - красный)
- **R3** — 220 Ом (RGB - зелёный)
- **R4** — 220 Ом (RGB - синий)
- **R5-R8** — 470 Ом (мостовая схема LED+кнопки)
- **R9** — 4.7кОм (база Q2 - buzzer)
- **R10** — 10кОм (затвор Q1 - relay)
- **R11** — 100кОм (pull-down затвора Q1)
- **R12** — 10кОм (внешний pull-up RESET PB3 к VCC)
- **R14** — 10кОм (pull-down базы Q2)

### ПРОЧИЕ КОМПОНЕНТЫ
- **K1**   — Реле 5V SPDT
- **BZ1**  — Buzzer пассивный 5V
- **SW1**  — Кнопка тактовая (KEY1)
- **SW2**  — Кнопка тактовая (KEY2)
- **NTC1** — Термистор NTC 50кОм (B25/85: 3950K)
- **J1**   — Разъём питания 2-pin (вход 5V DC)
- **J2**   — Клеммник 2-pin (сигнал управления реле)
- **J3**   — Разъём ISP 6-pin (USBasp)

---

## ATTINY44A РАСПИНОВКА (SOP-14)

```
IC1-1   VCC
IC1-2   PB0  (PCINT8/XTAL1)        → A_1_2 (LED1/LED2 аноды + KEY2)
IC1-3   PB1  (PCINT9/XTAL2)        → C_2_4 (LED2/LED4 катоды)
IC1-4   PB3  (PCINT11/RESET)       → ISP RESET (внешний pull-up 10k)
IC1-5   PB2  (PCINT10/OC0A)        → LED_R (PWM)
IC1-6   PA7  (PCINT7/OC0B/ADC7)    → LED_G (PWM)
IC1-7   PA6  (PCINT6/OC1A/MOSI)    → LED_B (PWM)
IC1-8   PA5  (PCINT5/OC1B/MISO)    → СВОБОДЕН (резерв ISP MISO)
IC1-9   PA4  (PCINT4/T1/SCL)       → RELAY (сигнал к силовой плате)
IC1-10  PA3  (PCINT3/T0)           → C_1_3 (LED1/LED3 катоды)
IC1-11  PA2  (PCINT2/AIN1)         → A_3_4 (LED3/LED4/LED5 аноды + KEY1)
IC1-12  PA1  (PCINT1/AIN0/ADC1)    → NTC (ADC1)
IC1-13  PA0  (PCINT0/AREF/ADC0)    → BUZZER (прямой выход, через NPN)
IC1-14  GND
```

---

## СПИСОК СОЕДИНЕНИЙ

### ПИТАНИЕ 5V

**Net: VCC_5V**
- J1-1 (вход 5V)
- C1-1, C2-1
- IC1-1 (VCC)
- R1-1
- LED_RGB-ANODE
- BZ1-PLUS
- J2-1 (к силовой плате)
- J3-2 (ISP VCC)
- R12-1

**Net: GND**
- J1-2
- C1-2, C2-2, C3-2
- IC1-14 (GND)
- Q1-SOURCE, Q2-EMITTER
- NTC1-2
- SW1-1, SW2-1
- R11-2, R14-2
- J3-6 (ISP GND)

**Net: RESET_PULLUP**
- R12-2 → IC1-4 (PB3/RESET)

---

### RGB LED (ОБЩИЙ АНОД)

**Net: LED_R_CTRL**
- IC1-5 (PB2/OC0A) → R2-1 → LED_RGB-RED

**Net: LED_G_CTRL**
- IC1-6 (PA7/OC0B) → R3-1 → LED_RGB-GREEN

**Net: LED_B_CTRL**
- IC1-7 (PA6/OC1A) → R4-1 → LED_RGB-BLUE

**Net: RGB_ANODE**
- LED_RGB-ANODE → VCC_5V

---

### BUZZER (ПРЯМОЙ ВЫХОД НА PA0, ЧЕРЕЗ NPN)

**Net: BUZZER_CTRL**
- IC1-13 (PA0) → R9-1

**Net: BUZZER_BASE**
- R9-2 → Q2-BASE
- Q2-BASE → R14-1

**Net: BUZZER_PULLDN**
- R14-2 → GND

**Net: BUZZER_COL**
- Q2-COLLECTOR → BZ1-MINUS

**Net: BUZZER_PLUS**
- BZ1-PLUS → VCC_5V

**Net: BUZZER_EMIT**
- Q2-EMITTER → GND

---

### УПРАВЛЕНИЕ РЕЛЕ

**Net: RELAY_CTRL**
- IC1-9 (PA4) → R10-1

**Net: RELAY_GATE**
- R10-2 → Q1-GATE
- Q1-GATE → R11-1

**Net: RELAY_PULLDN**
- R11-2 → GND

**Net: RELAY_SIGNAL**
- Q1-DRAIN → J2-2 (к силовой плате)

**Net: RELAY_SOURCE**
- Q1-SOURCE → GND

---

### ТЕРМИСТОР NTC

**Net: NTC_VCC**
- VCC_5V → R1-1

**Net: NTC_SENSE**
- R1-2 → IC1-12 (PA1/ADC1) → C3-1 → NTC1-1

**Net: NTC_GND**
- NTC1-2 → C3-2 → GND

---

### МОСТ 1-2 (PB0, KEY2)

**Net: BRIDGE_12_GND**
- GND → SW2-1

**Net: BRIDGE_12_KEY**
- SW2-2 → R5-1

**Net: BRIDGE_12_MID**
- R5-2 → R6-1 → LED1-ANODE → LED2-ANODE

**Net: BRIDGE_12_MCU**
- R6-2 → IC1-2 (PB0)

**Net: LED1_CATHODE**
- LED1-CATHODE → IC1-10 (PA3)

**Net: LED2_CATHODE**
- LED2-CATHODE → IC1-3 (PB1)

---

### МОСТ 3-4-5 (PA2, KEY1)

**Net: BRIDGE_345_GND**
- GND → SW1-1

**Net: BRIDGE_345_KEY**
- SW1-2 → R7-1

**Net: BRIDGE_345_MID**
- R7-2 → R8-1 → LED3-ANODE → LED4-ANODE → LED5-ANODE

**Net: BRIDGE_345_MCU**
- R8-2 → IC1-11 (PA2)

**Net: LED3_CATHODE**
- LED3-CATHODE → IC1-10 (PA3)

**Net: LED4_CATHODE**
- LED4-CATHODE → IC1-3 (PB1)

**Net: LED5_CATHODE**
- LED5-CATHODE → (PA3 + PB1 одновременно)

---

### ISP (J3, USBasp)

```
J3-1: MISO  ← IC1-8 (PA5) 
J3-2: VCC
J3-3: SCK   ← IC1-5 (PB2)  → конфликт с LED_R
J3-4: MOSI  ← IC1-7 (PA6)  → конфликт с LED_B
J3-5: RESET ← IC1-4 (PB3)
J3-6: GND
```

**⚠️ Рекомендация:** Программировать до установки RGB LED или отключать разъём RGB при прошивке.

---

## ПОТРЕБЛЕНИЕ ТОКА

- ATtiny44A: 1–2 мА
- RGB LED (макс): 60 мА
- LED индикаторы: 10 мА/шт × 5 = 50 мА
- Buzzer: 30 мА
- Делитель NTC: 0.1 мА
- **Итого (пик):** ~140 мА
- **Источник:** 5V ≥ 200 мА

---


–£–ú–ù–´–ô –≠–õ–ï–ö–¢–†–û–ß–ê–ô–ù–ò–ö –ù–ê ATTINY44A
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
## –ö–†–ê–¢–ö–û

### –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
–ò–∑–º–µ—Ä—è—Ç—å —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤–æ–¥—ã (NTC —Ç–µ—Ä–º–∏—Å—Ç–æ—Ä), —É–ø—Ä–∞–≤–ª—è—Ç—å –Ω–∞–≥—Ä–µ–≤–æ–º —á–µ—Ä–µ–∑ —Ä–µ–ª–µ 5V —Å –∫–æ–º–º—É—Ç–∞—Ü–∏–µ–π 220V, –∏–Ω–¥–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ RGB LED –∏ 5 LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏, –ø–æ–¥–∞–≤–∞—Ç—å –∑–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã —á–µ—Ä–µ–∑ –±—É–∑–∑–µ—Ä.

### –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞
ATtiny44A (SOP-14), —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞ 8 MHz (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π RC-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä)

### –°—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- Microchip Studio (—Å AVR-GCC)
- Arduino IDE (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π ATtiny)

---

## –ë–´–°–¢–†–´–ï –§–ê–ö–¢–´ (–í–•–û–î–´ / –í–´–•–û–î–´)

### –í–•–û–î–´:
- **KEY1 (–∫–Ω–æ–ø–∫–∞ 1)** ‚Üí PA2 (pin 11, —á–µ—Ä–µ–∑ –º–æ—Å—Ç 3-4)
- **KEY2 (–∫–Ω–æ–ø–∫–∞ 2)** ‚Üí PB0 (pin 2, —á–µ—Ä–µ–∑ –º–æ—Å—Ç 1-2)
- **NTC —Ç–µ—Ä–º–∏—Å—Ç–æ—Ä** ‚Üí PA1 (ADC1, pin 12)

### –°–ò–°–¢–ï–ú–ù–´–ï –ü–ò–ù–´:
- **PA5 (pin 8)** ‚Üí –°–í–û–ë–û–î–ï–ù (—Ä–µ–∑–µ—Ä–≤ –¥–ª—è ISP MISO)
- **PB3 (pin 4)** ‚Üí RESET (–¥–ª—è ISP, –≤–Ω–µ—à–Ω–∏–π pull-up 10kŒ© –∫ VCC)

### –í–´–•–û–î–´:
- **RELAY** ‚Üí PA4 (pin 9, —á–µ—Ä–µ–∑ 2N7002 MOSFET)
- **RGB LED –∫—Ä–∞—Å–Ω—ã–π** ‚Üí PB2 (pin 5, PWM OCR0A)
- **RGB LED –∑–µ–ª—ë–Ω—ã–π** ‚Üí PA7 (pin 6, PWM OCR0B)
- **RGB LED —Å–∏–Ω–∏–π** ‚Üí PA6 (pin 7, PWM OCR1A)
- **LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** ‚Üí –ú–æ—Å—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ (A_1_2=PB0, A_3_4=PA2, C_1_3=PA3, C_2_4=PB1)
- **BUZZER** ‚Üí **PA0 (pin 13)**, —á–µ—Ä–µ–∑ MMBT2222A NPN, **–ü–†–Ø–ú–ê–Ø –õ–û–ì–ò–ö–ê**

### –ü–ê–ú–Ø–¢–¨:
- **EEPROM –∞–¥—Ä–µ—Å 0x00:** –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (0-4)

---

## –†–ï–ñ–ò–ú–´ –†–ê–ë–û–¢–´

### –ü–†–ï–î–£–°–¢–ê–ù–û–í–õ–ï–ù–ù–´–ï –¢–ï–ú–ü–ï–†–ê–¢–£–†–´ (¬∞C):

| –†–µ–∂–∏–º | –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | LED    | –¶–≤–µ—Ç RGB                          |
|-------|-------------|--------|-----------------------------------|
| 1     | 40¬∞C        | LED1 ‚óè | üîµ –°–∏–Ω–∏–π (–æ—Ç—Ç–µ–Ω–æ–∫ 180)           |
| 2     | 50¬∞C        | LED2 ‚óè | üü¢ –ó–µ–ª—ë–Ω—ã–π (–æ—Ç—Ç–µ–Ω–æ–∫ 96)          |
| 3     | 60¬∞C        | LED3 ‚óè | üü° –ñ–µ–ª—Ç–æ-–∑–µ–ª—ë–Ω—ã–π (–æ—Ç—Ç–µ–Ω–æ–∫ 64)    |
| 4     | 80¬∞C        | LED4 ‚óè | üü† –ñ–µ–ª—Ç—ã–π (–æ—Ç—Ç–µ–Ω–æ–∫ 32)           |
| 5     | 90¬∞C        |LED5 ‚óè‚óè | üî¥ –û—Ä–∞–Ω–∂–µ–≤–æ-–∫—Ä–∞—Å–Ω—ã–π (–æ—Ç—Ç–µ–Ω–æ–∫ 16) |

### –°–ü–ï–¶–ò–ê–õ–¨–ù–´–ï –†–ï–ñ–ò–ú–´ –ö–ò–ü–Ø–ß–ï–ù–ò–Ø:
- **–ü–æ–ª–Ω–æ–µ –∫–∏–ø—è—á–µ–Ω–∏–µ** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): 20 –º–∏–Ω—É—Ç –º–∞–∫—Å–∏–º—É–º
- **–ß–∞—Å—Ç–∏—á–Ω–æ–µ –∫–∏–ø—è—á–µ–Ω–∏–µ** (partial_boil): 5 –º–∏–Ω—É—Ç
  - –ê–∫—Ç–∏–≤–∞—Ü–∏—è: —É–¥–µ—Ä–∂–∞–Ω–∏–µ BTN1 –≤ —Ä–µ–∂–∏–º–µ BOILING

---

## –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨ –ò –ö–û–ù–¢–†–û–õ–¨

### WATCHDOG TIMER:
- **WDT –≤–∫–ª—é—á—ë–Ω:** WDTO_8S (—Ç–∞–π–º–∞—É—Ç 8 —Å–µ–∫—É–Ω–¥)
- **–°–±—Ä–æ—Å:** `wdt_reset()` –∫–∞–∂–¥—ã–µ 5–º—Å –≤ –≥–ª–∞–≤–Ω–æ–º —Ü–∏–∫–ª–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞** –ø—Ä–∏ –∑–∞–≤–∏—Å–∞–Ω–∏–∏

### –ó–ê–©–ò–¢–ù–´–ï –ü–û–†–û–ì–ò (–≤ —Å–æ—Ç—ã—Ö ¬∞C):
- **TEMP_MAX: 10300** (103¬∞C) ‚Üí –ê–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- **TEMP_MIN: 715** (7.15¬∞C) ‚Üí –û–±—Ä—ã–≤ –¥–∞—Ç—á–∏–∫–∞/–ø—É—Å—Ç–æ–π —á–∞–π–Ω–∏–∫

### –¢–ê–ô–ú–ê–£–¢–´ –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò (–º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã):
- **TIME_TEMP_STUCK: 262144 –º—Å** (~4.4 –º–∏–Ω)
  - –ï—Å–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ —Ä–∞—Å—Ç—ë—Ç ‚Üí –∞–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
- **TIME_MAX_HEATING: 2097152 –º—Å** (~35 –º–∏–Ω)
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞–≥—Ä–µ–≤–∞ ‚Üí –∞–≤–∞—Ä–∏–π–Ω–æ–µ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ

### –ö–û–ù–¢–†–û–õ–¨ –°–ö–û–†–û–°–¢–ò –ù–ê–ì–†–ï–í–ê:
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∫–∏–ø–µ–Ω–∏—è:** –ø—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞–≥—Ä–µ–≤–∞ < 1¬∞C/—Å–µ–∫ –Ω–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ >94¬∞C
- **–ó–∞—â–∏—Ç–∞ –æ—Ç —Å—É—Ö–æ–≥–æ –∫–∏–ø—è—á–µ–Ω–∏—è:** –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–æ—Å—Ç–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
- **–ò–Ω–¥–∏–∫–∞—Ü–∏—è –æ–±—ä—ë–º–∞ –≤–æ–¥—ã:** —á–µ—Ä–µ–∑ —Å–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏ RGB LED

---

## –ò–ù–î–ò–ö–ê–¶–ò–Ø –ò –ó–í–£–ö

### RGB LED (–û–ë–©–ò–ô –ê–ù–û–î, –ò–ù–í–ï–†–°–ù–ê–Ø –õ–û–ì–ò–ö–ê PWM):
- **–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π PWM:** Timer0 (OCR0A, OCR0B), Timer1 (OCR1A)
- **–ò–Ω–≤–µ—Ä—Å–∏—è –≤ –∫–æ–¥–µ:** `OCR0A = 255 - r` (255 ‚Üí LED –≤—ã–∫–ª—é—á–µ–Ω, 0 ‚Üí –º–∞–∫—Å —è—Ä–∫–æ—Å—Ç—å)
- **HSV‚ÜíRGB** –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- **–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è:** –æ—Ç —Å–∏–Ω–µ–≥–æ (40¬∞C) –¥–æ –∫—Ä–∞—Å–Ω–æ–≥–æ (95¬∞C)
  - –§–æ—Ä–º—É–ª–∞: `hue = 180 - ((temp - 4000) * 164) / 5500`

### LED –ò–ù–î–ò–ö–ê–¢–û–†–´ (–ú–û–°–¢–û–í–ê–Ø –°–•–ï–ú–ê):
- **5 LED** —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ 2 –º–æ—Å—Ç–∞ (–¥–µ–ª–∏—Ç–µ–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è)
- **–ú–∞—Ç—Ä–∏—á–Ω–æ–µ –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
- **–†–µ–∑–∏—Å—Ç–æ—Ä—ã:** –ø–æ 470Œ© –≤ –∫–∞–∂–¥–æ–º –º–æ—Å—Ç—É
- **LED5:** –∑–∞–∂–∏–≥–∞–µ—Ç LED3 + LED4 –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—á–µ—Ä–µ–∑ –æ–±–∞ –∫–∞—Ç–æ–¥–∞)

### BUZZER (–ü–ê–°–°–ò–í–ù–´–ô, –ü–†–Ø–ú–ê–Ø –õ–û–ì–ò–ö–ê):

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ NPN —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä MMBT2222A/SS8050

- **HIGH –Ω–∞ PA0** ‚Üí —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç ‚Üí buzzer **–í–ö–õ–Æ–ß–ï–ù**
- **LOW –Ω–∞ PA0** ‚Üí —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –∑–∞–∫—Ä—ã—Ç ‚Üí buzzer **–í–´–ö–õ–Æ–ß–ï–ù**

**–ó–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã:**
1. **–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–∞–∂–∞—Ç–∏—è:** 30 –º—Å –ø–∏—Å–∫
2. **–†–µ–∂–∏–º ALARMING:** 30-—Å–µ–∫—É–Ω–¥–Ω—ã–π —Å–∏–≥–Ω–∞–ª
   - 0-10 —Å–µ–∫ ‚Üí –∑–≤—É–∫
   - 10-20 —Å–µ–∫ ‚Üí —Ç–∏—à–∏–Ω–∞
   - 20-30 —Å–µ–∫ ‚Üí –∑–≤—É–∫
3. **–†–µ–∂–∏–º ERROR:** —Ç—Ä–µ–≤–æ–∂–Ω—ã–π –ø—Ä–µ—Ä—ã–≤–∏—Å—Ç—ã–π —Å–∏–≥–Ω–∞–ª 250 –º—Å (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å –º–∏–≥–∞–Ω–∏–µ–º –∫—Ä–∞—Å–Ω–æ–≥–æ LED)
4. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∞–≥—Ä–µ–≤–∞:** –º–µ–ª–æ–¥–∏—á–Ω—ã–π —Ç–æ–Ω (—á–∞—Å—Ç–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ—Å–µ—Ç–∞)

---

## –£–ü–†–ê–í–õ–ï–ù–ò–ï (UX)

### –ö–ù–û–ü–ö–ê BTN1 (KEY1, PA2, pin 11):

**–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:**
- –í —Ä–µ–∂–∏–º–µ **OFF:** –∑–∞–ø—É—Å–∫ –∫–∏–ø—è—á–µ–Ω–∏—è (BOILING)
- –í —Ä–µ–∂–∏–º–µ **SELECTING:** –æ—Ç–º–µ–Ω–∞ –≤—ã–±–æ—Ä–∞, –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF
- –í —Ä–µ–∂–∏–º–µ **HEATING/BOILING:** –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞–≥—Ä–µ–≤–∞, –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF
- –í —Ä–µ–∂–∏–º–µ **ALARMING/ERROR:** –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF

**–î–ª–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ (>3 —Å–µ–∫):**
- –í —Ä–µ–∂–∏–º–µ **BOILING:** –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ partial_boil (–≤–∫–ª/–≤—ã–∫–ª)
  - –ò–Ω–¥–∏–∫–∞—Ü–∏—è: –∂–µ–ª—Ç—ã–π —Ü–≤–µ—Ç (–≤–∫–ª) –∏–ª–∏ –∫—Ä–∞—Å–Ω—ã–π (–≤—ã–∫–ª) –Ω–∞ 1 —Å–µ–∫—É–Ω–¥—É

### –ö–ù–û–ü–ö–ê BTN2 (KEY2, PB0, pin 2):

**–ö–æ—Ä–æ—Ç–∫–æ–µ –Ω–∞–∂–∞—Ç–∏–µ:**
- –í —Ä–µ–∂–∏–º–µ **OFF:** –≤—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –≤—ã–±–æ—Ä–∞ (SELECTING)
- –í —Ä–µ–∂–∏–º–µ **SELECTING:** –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞ (1‚Üí2‚Üí3‚Üí4‚Üí5‚Üí1)

**–£–¥–µ—Ä–∂–∞–Ω–∏–µ 3 —Å–µ–∫—É–Ω–¥—ã:**
- –í —Ä–µ–∂–∏–º–µ **SELECTING:** —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–∞ –≤ EEPROM
  - LED –º–∏–≥–Ω—ë—Ç: –≤—ã–∫–ª—é—á–∏—Ç—Å—è –Ω–∞ 250–º—Å, –∑–∞—Ç–µ–º —Å–Ω–æ–≤–∞ –∑–∞–∂–∂—ë—Ç—Å—è

### –¢–ê–ô–ú–ï–†–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê:
- **TIME_HOLD_SHORT = 3000 –º—Å** (–∫–æ—Ä–æ—Ç–∫–æ–µ —É–¥–µ—Ä–∂–∞–Ω–∏–µ)
- **TIME_SELECT = 12000 –º—Å** (–∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–µ—Å–µ—Ç–∞)

### –ê–í–¢–û–°–¢–ê–†–¢ –ù–ê–ì–†–ï–í–ê:
- –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ —Ä–µ–∂–∏–º–∞: **12 —Å–µ–∫—É–Ω–¥** –Ω–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
- –ï—Å–ª–∏ `temp_now < temp_target - 350` (3.5¬∞C) ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å—Ç–∞—Ä—Ç HEATING
- –ò–Ω–∞—á–µ (–≤–æ–¥–∞ —É–∂–µ –≥–æ—Ä—è—á–∞—è) ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF

---

## –ß–¢–ï–ù–ò–ï –ö–ù–û–ü–û–ö –í –ö–û–î–ï

### –ú–û–°–¢–û–í–ê–Ø –°–•–ï–ú–ê –° –¶–ò–§–†–û–í–´–ú–ò –í–•–û–î–ê–ú–ò:

–í –∫–æ–¥–µ main.c (—Ñ—É–Ω–∫—Ü–∏—è `read_button`):
```c
if (!(PINA & _BV(A_3_4))) btn = 1;      // PA2 ‚Üí BTN1 (KEY1)
else if (!(PINB & _BV(A_1_2))) btn = 2; // PB0 ‚Üí BTN2 (KEY2)
```

### –ü–†–ò–ù–¶–ò–ü:
- **–í –ø–æ–∫–æ–µ:** –ø–∏–Ω—ã –ø–æ–¥—Ç—è–Ω—É—Ç—ã —á–µ—Ä–µ–∑ –¥–µ–ª–∏—Ç–µ–ª—å 470Œ©-470Œ© –∫ HIGH
- **–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏:** –∫–Ω–æ–ø–∫–∞ –∑–∞–º—ã–∫–∞–µ—Ç –Ω–∞ GND ‚Üí –ø–∏–Ω —á–∏—Ç–∞–µ—Ç LOW
- **–ú–ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç LOW** –∫–∞–∫ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
- **–ê–Ω—Ç–∏–¥—Ä–µ–±–µ–∑–≥:** 200 –º—Å –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–£—Ä–æ–≤–Ω–∏ —É–¥–µ—Ä–∂–∞–Ω–∏—è:** 0 (–Ω–µ –Ω–∞–∂–∞—Ç–∞), 1 (>200–º—Å), 2 (>3—Å–µ–∫)

---

## –°–û–°–¢–û–Ø–ù–ò–Ø –°–ò–°–¢–ï–ú–´ (State)

### OFF:
- –†–µ–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–æ
- RGB LED –≤—ã–∫–ª—é—á–µ–Ω
- LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—ã–∫–ª—é—á–µ–Ω—ã
- preset_idx —Å–±—Ä–æ—à–µ–Ω –≤ 0
- partial_boil —Å–±—Ä–æ—à–µ–Ω –≤ false

### SELECTING:
- –†–µ–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–æ
- RGB LED –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ü–≤–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞ (–ø–æ–ª–Ω–∞—è —è—Ä–∫–æ—Å—Ç—å)
- –ì–æ—Ä–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä (1-5)
- preset_idx –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ EEPROM –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ —Ä–µ–∂–∏–º
- –¢–∞–π–º–µ—Ä –∞–≤—Ç–æ—Å—Ç–∞—Ä—Ç–∞: 12 —Å–µ–∫—É–Ω–¥

### HEATING:
- –†–µ–ª–µ –≤–∫–ª—é—á–µ–Ω–æ (–Ω–∞–≥—Ä–µ–≤)
- RGB LED –ø—É–ª—å—Å–∏—Ä—É–µ—Ç —Å —Ü–≤–µ—Ç–æ–º —Ç–µ–∫—É—â–µ–π —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (0-255)
- LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—ã–∫–ª—é—á–µ–Ω—ã
- **–°–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä—ë–º–∞ –≤–æ–¥—ã**
  - –ë—ã—Å—Ç—Ä–∞—è (15–º—Å) ‚Üí –º–∞–ª–æ –≤–æ–¥—ã
  - –°—Ä–µ–¥–Ω—è—è (22–º—Å) ‚Üí —Å—Ä–µ–¥–Ω–∏–π –æ–±—ä—ë–º
  - –ú–µ–¥–ª–µ–Ω–Ω–∞—è (30–º—Å) ‚Üí –º–Ω–æ–≥–æ –≤–æ–¥—ã

### BOILING:
- –†–µ–ª–µ –≤–∫–ª—é—á–µ–Ω–æ (–Ω–∞–≥—Ä–µ–≤)
- RGB LED –≤—ã–∫–ª—é—á–µ–Ω (–∏–ª–∏ –∏–Ω–¥–∏–∫–∞—Ü–∏—è partial_boil –ø—Ä–∏ —É–¥–µ—Ä–∂–∞–Ω–∏–∏ BTN1)
- LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤—ã–∫–ª—é—á–µ–Ω—ã
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∏–ø–µ–Ω–∏—è** –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞–≥—Ä–µ–≤–∞
- partial_boil –≤–ª–∏—è–µ—Ç –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (5 –º–∏–Ω vs 20 –º–∏–Ω)

### ALARMING:
- –†–µ–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–æ
- RGB LED –ø—É–ª—å—Å–∏—Ä—É–µ—Ç
- Buzzer: 30-—Å–µ–∫—É–Ω–¥–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å (10—Å –≤–∫–ª, 10—Å –ø–∞—É–∑–∞, 10—Å –≤–∫–ª)
- **–ú–µ–ª–æ–¥–∏—á–Ω—ã–π —Ç–æ–Ω** –≤ –∫–æ–Ω—Ü–µ (—á–∞—Å—Ç–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ—Å–µ—Ç–∞)
- –õ—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF

### ERROR:
- –†–µ–ª–µ –≤—ã–∫–ª—é—á–µ–Ω–æ
- RGB LED –º–∏–≥–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–º (250 –º—Å –≤–∫–ª/–≤—ã–∫–ª)
- Buzzer –º–∏–≥–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ —Å LED (250 –º—Å –≤–∫–ª/–≤—ã–∫–ª)
- **–ü—Ä–∏—á–∏–Ω—ã:** temp >= TEMP_MAX, temp < TEMP_MIN, –∑–∞—Å—Ç—Ä–µ–≤–∞–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã, —Ç–∞–π–º–∞—É—Ç
- –õ—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ ‚Üí –≤–æ–∑–≤—Ä–∞—Ç –≤ OFF

---

## –ö–û–†–û–¢–ö–ò–ï –ò–ù–°–¢–†–£–ö–¶–ò–ò –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ß–ò–ö–ê

### –ö–û–ú–ü–ò–õ–Ø–¶–ò–Ø:

**Microchip Studio:**
1. Project Properties ‚Üí Toolchain ‚Üí Symbols
2. –î–æ–±–∞–≤–∏—Ç—å: `F_CPU=8000000UL`
3. Optimization: `-Os` (optimize for size)
4. Build ‚Üí Rebuild Solution

### –£–°–¢–ê–ù–û–í–ö–ê –§–¨–Æ–ó–û–í:

```bash
avrdude -c usbasp -p t44 \
        -U lfuse:w:0xE2:m \
        -U hfuse:w:0xDD:m \
        -U efuse:w:0xFF:m
```

**–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞:**
- **LFUSE 0xE2:** –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π RC 8MHz, –±–µ–∑ –¥–µ–ª–∏—Ç–µ–ª—è, startup 65ms
- **HFUSE 0xDD:** —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å EEPROM –ø—Ä–∏ —Å—Ç–∏—Ä–∞–Ω–∏–∏, BOD 2.7V
- **EFUSE 0xFF:** —Å–∞–º–æ–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ

### –ü–†–û–®–ò–í–ö–ê:

1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å USBasp –∫ ISP —Ä–∞–∑—ä—ë–º—É J3
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ñ—å—é–∑—ã (–æ–¥–∏–Ω —Ä–∞–∑)
3. –ü—Ä–æ—à–∏—Ç—å firmware:
```bash
avrdude -c usbasp -p t44 -U flash:w:main.hex:i
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –ü—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ:
- LED_R (PB2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ SCK)
- LED_B (PA6 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ MOSI)
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∂–∞–º–ø–µ—Ä—ã –¥–ª—è –æ—Ç–∫–ª—é—á–µ–Ω–∏—è R2, R4

### –ö–ê–õ–ò–ë–†–û–í–ö–ê NTC:

1. –ò–∑–º–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –≤–æ–¥—ã —Ç–µ—Ä–º–æ–º–µ—Ç—Ä–æ–º
2. –ó–∞–ø–∏—Å–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–¥:
```c
#define CAL_T1_C   29      // —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–æ—á–∫–∏ 1 (¬∞C)
#define CAL_R1     45000UL // —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ NTC –≤ —Ç–æ—á–∫–µ 1 (–û–º)
#define CAL_T2_C   65      // —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ —Ç–æ—á–∫–∏ 2 (¬∞C)
#define CAL_R2     10800UL // —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ NTC –≤ —Ç–æ—á–∫–µ 2 (–û–º)
```
3. –ü–µ—Ä–µ–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ—à–∏—Ç—å
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 20-100¬∞C

### –î–ï–ë–ê–ì –ë–ï–ó UART:

1. **RGB LED** –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π (—Ü–≤–µ—Ç = —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
2. **LED –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã** –¥–ª—è –ø–æ–∫–∞–∑–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (–¥–≤–æ–∏—á–Ω—ã–π –∫–æ–¥)
3. **Buzzer** –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∏—Å–∫–æ–≤)
4. **EEPROM** –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π

---

## –ò–ó–í–ï–°–¢–ù–´–ï –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

### 1. Flash –ø–∞–º—è—Ç—å ATtiny44A: 4096 –±–∞–π—Ç
- –¢–µ–∫—É—â–∏–π –∫–æ–¥: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ `-Os`
- –ó–∞–ø–∞—Å: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ (~100-200 –±–∞–π—Ç)

### 2. RAM (SRAM): 256 –±–∞–π—Ç
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: ~50 –±–∞–π—Ç
- –°—Ç–µ–∫: ~20 –±–∞–π—Ç
- –ó–∞–ø–∞—Å: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–∏

### 3. EEPROM: 256 –±–∞–π—Ç
- –ê–¥—Ä–µ—Å 0x00: preset_idx (1 –±–∞–π—Ç)
- –°–≤–æ–±–æ–¥–Ω–æ: 255 –±–∞–π—Ç–æ–≤ (–¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π)

### 4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è ISP –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–∏–Ω–æ–≤ —Å RGB LED (LED_R, LED_B)
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –¥–æ –ø–∞–π–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∂–∞–º–ø–µ—Ä—ã/–≤—ã–∫–ª—é—á–∞—Ç–µ–ª–∏

---

## –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í –ü–†–û–ï–ö–¢–ê

```
main.c                          - –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ (–≤–µ—Ä—Å–∏—è 4.2)
Kettle_Controller_Netlist.txt   - –°–ø–∏—Å–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π (v4.2)
Checklist.txt                   - –ß–µ–∫-–ª–∏—Å—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ (v4.2)
kettle_schematic.html           - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Å—Ö–µ–º–∞ (v4.2)
```

---

## –§–û–†–ú–£–õ–ê –†–ê–°–ß–Å–¢–ê –¢–ï–ú–ü–ï–†–ê–¢–£–†–´

### –§—É–Ω–∫—Ü–∏—è: `read_temp_raw()`

**–ß—Ç–µ–Ω–∏–µ ADC:**
- REFS0: –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ VCC (5V)
- Prescaler: /16 (ADPS2|ADPS1)
- –ö–∞–Ω–∞–ª: ADC1 (PA1)
- –ú–µ–¥–∏–∞–Ω–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏–∑ 3 –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π

**–î–µ–ª–∏—Ç–µ–ª—å NTC:**
```
VCC (5V) ‚Üí R1 (47–∫–û–º) ‚Üí ADC1 ‚Üí NTC1 (50–∫–û–º) ‚Üí GND
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á—ë—Ç —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ —Ç–æ—á–∫–∏:**
```c
#define TEMP_B ((CAL_T2 - CAL_T1) / (CAL_ADC1 - CAL_ADC2))
#define TEMP_A (CAL_T1 + CAL_ADC1 * TEMP_B)

return TEMP_A - mid * TEMP_B;
```

**–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è:**
```c
temp_now += (raw - temp_now) / 32  // –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
```

**–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
```c
if (|temp_now - last_stable| > 100)  // 1¬∞C
    temp_last_change = system_millis
```

---

## –ù–û–í–´–ï –§–£–ù–ö–¶–ò–ò –í v4.2

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∏–ø–µ–Ω–∏—è
–ö–æ–Ω—Ç—Ä–æ–ª—å —Å–∫–æ—Ä–æ—Å—Ç–∏ –Ω–∞–≥—Ä–µ–≤–∞ –ø—Ä–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–µ >94¬∞C:
```c
uint16_t rate = (uint32_t)dT * 1000 / dt;
if (rate < 100) { // < 1¬∞C/—Å–µ–∫ ‚Üí –∫–∏–ø–µ–Ω–∏–µ
    boil_detected = 1;
    enter_state(ALARMING);
}
```

### 2. –ò–Ω–¥–∏–∫–∞—Ü–∏—è –æ–±—ä—ë–º–∞ –≤–æ–¥—ã
–ß–µ—Ä–µ–∑ —Å–∫–æ—Ä–æ—Å—Ç—å –ø—É–ª—å—Å–∞—Ü–∏–∏ RGB LED:
```c
if (time_to_60C < 20000) breath_delay = 15;   // –º–∞–ª–æ –≤–æ–¥—ã
else if (time_to_60C < 40000) breath_delay = 22; // —Å—Ä–µ–¥–Ω–µ–µ
else breath_delay = 30;                        // –º–Ω–æ–≥–æ –≤–æ–¥—ã
```

### 3. –ú–µ–ª–æ–¥–∏—á–Ω—ã–µ –∑–≤—É–∫–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã
–§—É–Ω–∫—Ü–∏—è `play_tone()` –¥–ª—è –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è —Ç–æ–Ω–æ–≤:
```c
play_tone(freq_hz, duration_ms);
// –ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ø—Ä–µ—Å–µ—Ç–∞ (600-1800 –ì—Ü)
```

---

## –ö–û–ù–¢–ê–ö–¢–´ –ò –ü–û–î–î–ï–†–ñ–ö–ê

**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 4.2  
**–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 02.11.2025  
**–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞:** ATtiny44A @ 8MHz  
**–õ–∏—Ü–µ–Ω–∑–∏—è:** Open Source

‚ö†Ô∏è **–í–ù–ò–ú–ê–ù–ò–ï:** –†–µ–ª–µ –∫–æ–º–º—É—Ç–∏—Ä—É–µ—Ç 220V AC - —Å–æ–±–ª—é–¥–∞–π—Ç–µ —Ç–µ—Ö–Ω–∏–∫—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

### –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï –û –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò:
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∑–æ—Ä –º–µ–∂–¥—É 220V –∏ 5V: **5 –º–º**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–µ–ª–µ —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–æ—Ä–ø—É—Å–æ–º
- –¢–µ—Ä–º–∏—Å—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –æ—Ç –≤—ã—Å–æ–∫–æ–≤–æ–ª—å—Ç–Ω—ã—Ö —Ü–µ–ø–µ–π
- –ù–µ —ç–∫—Å–ø–ª—É–∞—Ç–∏—Ä—É–π—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –±–µ–∑ –∑–∞—â–∏—Ç–Ω–æ–≥–æ –∫–æ—Ä–ø—É—Å–∞
- –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã —Ä–µ–ª–µ –Ω–∞ –∏–∑–Ω–æ—Å

---
